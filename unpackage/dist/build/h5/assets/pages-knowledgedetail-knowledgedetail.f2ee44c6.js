import{s as a,g as t,r as e,a as s,o,c as n,w as l,i as c,f as i,j as d,v as r,q as u,C as p}from"./index-2552b00d.js";import{_ as f}from"./_plugin-vue_export-helper.1b428a4d.js";const h=f({data:()=>({detailData:"",content:""}),onLoad(o){const n=window.location.href,l=/[?&]channel(?:=([^&#]*)|&|#|$)/.exec(n),c=l&&l[1]?decodeURIComponent(l[1].replace(/\+/g," ")):null;a("channel",c);let i=o.key,d=t("token");""==d?async function(){try{await e({url:"https://api.maimangbox.cn/getToken",header:{"content-type":"application/json"},data:{platform:3,channel:c},method:"POST"}),e({url:"https://api.maimangbox.cn/content",data:{key:i},header:{"content-type":"application/json","api-token":d},method:"POST",success:a=>{console.log(a),1e4==a.data.resultCode?(this.detailData=a.data.data,console.log(this.detailData)):s({title:a.data.resultMsg,icon:"none"})}})}catch(a){console.error(a)}}():e({url:"https://api.maimangbox.cn/content",data:{key:i},header:{"content-type":"application/json","api-token":d},method:"POST",success:a=>{console.log(a),1e4==a.data.resultCode?(this.detailData=a.data.data,console.log(this.detailData)):s({title:a.data.resultMsg,icon:"none"})}})},methods:{shareFn(a){uni.share({provider:"weixin",scene:"WXSceneSession",type:1,summary:a,success:function(a){console.log("success:"+JSON.stringify(a))},fail:function(a){console.log("fail:"+JSON.stringify(a))}})}}},[["render",function(a,t,e,s,f,h){const m=u,g=c,_=p;return o(),n(g,{class:"container"},{default:l((()=>[i(g,{class:"top"},{default:l((()=>[i(g,{class:"sources"},{default:l((()=>[i(m,{src:f.detailData.source_logo,class:"img"},null,8,["src"]),i(g,{class:"name"},{default:l((()=>[i(g,{class:"title"},{default:l((()=>[d(r(f.detailData.source_name),1)])),_:1}),i(g,{class:"time"},{default:l((()=>[d(r(f.detailData.source_date),1)])),_:1})])),_:1})])),_:1}),i(g,{class:"follow",onClick:t[0]||(t[0]=a=>h.shareFn(f.detailData.source_title))},{default:l((()=>[d("分享")])),_:1})])),_:1}),i(g,{class:"detail"},{default:l((()=>[i(g,{class:"title"},{default:l((()=>[d(r(f.detailData.source_title),1)])),_:1}),i(_,{nodes:f.detailData.content},null,8,["nodes"])])),_:1})])),_:1})}],["__scopeId","data-v-b3fc68f1"]]);export{h as default};
