import{s as e,g as l,r as o,a as t,n as a,o as n,c as s,w as i,i as c,b as r,d,t as u,m as p,j as g,l as h,I as m,k as x,p as k}from"./index-9d063f4c.js";import{_ as f}from"./_plugin-vue_export-helper.1b428a4d.js";const _=""+new URL("login_bg-29094466.png",import.meta.url).href;const w=f({data:()=>({phone:"",pwd:"",second:60,interval:null,showText:!0,code:"",isCode:""}),onShow(){},methods:{startCountdown(){let e=this;e.interval=setInterval((()=>{this.second--,0===e.second&&(clearInterval(e.interval),this.showText=!0,this.second=60)}),1e3)},login(){let n=window.location.href.split("next=")[1];this.phone?/^[1][3,4,5,7,8,9][0-9]{9}$/.test(this.phone)?""==l("token")?o({url:"https://api.maimangbox.cn/getToken",data:{platform:3,channel:window.location.href.split("channel=")[1]},header:{"custom-header":"hello"},method:"POST",success:l=>{1e4==l.data.resultCode?t("token",l.data.data):(t("token",""),e({title:l.data.resultMsg,icon:"none"}),setTimeout((function(){a({url:"/pages/login/login"})}),3e3))}}):o({url:"https://api.maimangbox.cn/login",data:{phone:this.phone,code:this.code,next:n},header:{"api-token":l("token")},method:"POST",success:o=>{1e4==o.data.resultCode?(e({title:"登录成功！",icon:"none"}),t("token",o.data.data),console.log(l("clickUrl")),"index"!=n&&""!=n||a({url:"/pages/index/index"}),"list"==n&&a({url:"/pages/institutionlist/institutionlist?next=institutionlist"}),"click"==n&&(console.log(l("clickUrl")),a({url:"/pages/webview/webview?url="+l("clickUrl")})),"autoloan"==n&&(console.log(l("clickUrl")),a({url:"/pages/autoloan/autoloan?next=autoloan"})),"overdue"==n&&(console.log(l("clickUrl")),a({url:"/pages/overdue/overdue?next=overdue"})),"housingloan"==n&&(console.log(l("clickUrl")),a({url:"/pages/housingloan/housingloan?next=housingloan"})),"corporateloan"==n&&(console.log(l("clickUrl")),a({url:"/pages/corporateloan/corporateloan?next=corporateloan"})),"largeloan"==n&&(console.log(l("clickUrl")),a({url:"/pages/largeloan/largeloan?next=largeloan"})),"mate"==n&&(console.log(l("clickUrl")),a({url:"/pages/mate/mate?next=mate"})),"my"==n&&(console.log(l("clickUrl")),a({url:"/pages/my/my?next=my"})),"myApply"==n&&(console.log(l("clickUrl")),a({url:"/pages/application/application?next=myApply"}))):e({title:o.data.resultMsg,icon:"none"})}}):e({title:"请输入正确手机号",icon:"none"}):e({title:"请输入您的手机号",icon:"none"})},getCode(){if(!this.phone)return void e({title:"请输入您的手机号",icon:"none"});if(!/^[1][3,4,5,7,8,9][0-9]{9}$/.test(this.phone))return void e({title:"请输入正确手机号",icon:"none"});let t=l("token");o({url:"https://api.maimangbox.cn/sendMsg",data:{phone:this.phone},header:{"api-token":t},method:"POST",success:l=>{e({title:l.data.resultMsg,icon:"none"}),1e4==l.data.resultCode&&(this.showText=!1,this.startCountdown())}})}}},[["render",function(e,l,o,t,a,f){const w=g,v=c,y=h,U=m,b=x,C=k;return n(),s(v,{class:"container"},{default:i((()=>[r(v,{class:"img-a"},{default:i((()=>[r(v,{class:"t-b"},{default:i((()=>[r(w,{src:_,class:"logo",mode:"widthFix"}),r(v,null,{default:i((()=>[r(v,{class:"title"},{default:i((()=>[d("智能金融,管家服务")])),_:1}),r(v,{class:"subtitle"},{default:i((()=>[d("麦麦")])),_:1})])),_:1})])),_:1})])),_:1}),r(v,{class:"login-view",style:{}},{default:i((()=>[r(v,{class:"t-login"},{default:i((()=>[r(C,{class:"cl"},{default:i((()=>[r(v,{class:"t-a"},{default:i((()=>[r(y,{class:"txt"},{default:i((()=>[d("手机号")])),_:1}),r(U,{type:"number",name:"phone",placeholder:"请输入您的手机号",maxlength:"11",modelValue:a.phone,"onUpdate:modelValue":l[0]||(l[0]=e=>a.phone=e)},null,8,["modelValue"])])),_:1}),1!=a.isCode?(n(),s(v,{key:0,class:"t-a"},{default:i((()=>[r(y,{class:"txt"},{default:i((()=>[d("验证码")])),_:1}),r(U,{type:"number",name:"code",maxlength:"18",placeholder:"请输入您的密码",modelValue:a.code,"onUpdate:modelValue":l[1]||(l[1]=e=>a.code=e)},null,8,["modelValue"]),a.showText?(n(),s(v,{key:0,class:"t-c",onClick:l[2]||(l[2]=e=>f.getCode())},{default:i((()=>[d("发送验证码")])),_:1})):(n(),s(v,{key:1,class:"t-c",style:{"background-color":"#A7A7A7"}},{default:i((()=>[d("重新发送("+u(a.second)+")",1)])),_:1}))])),_:1})):p("",!0),r(b,{onClick:l[3]||(l[3]=e=>f.login()),class:"login_btn"},{default:i((()=>[d("登 录")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-7c16067c"]]);export{w as default};
